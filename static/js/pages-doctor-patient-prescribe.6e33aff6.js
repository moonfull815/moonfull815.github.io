(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-doctor-patient-prescribe"],{"09b4":function(t,e,i){var n=i("babc");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("14fb730d",n,!0,{sourceMap:!1,shadowMode:!1})},"20b9":function(t,e,i){"use strict";var n=i("6c2b"),a=i.n(n);a.a},"4f37":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */.uni-numbox[data-v-395a2786]{display:flex;flex-direction:row;height:35px;line-height:35px;width:120px}.uni-cursor-point[data-v-395a2786]{cursor:pointer}.uni-numbox__value[data-v-395a2786]{background-color:#fff;width:50px;height:35px;text-align:center;font-size:16px;border-width:%?1?%;border-style:solid;border-color:#e5e5e5;border-left-width:0;border-right-width:0}.uni-numbox__minus[data-v-395a2786]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:35px;height:35px;font-size:20px;color:#333;background-color:#f8f8f8;border-width:%?1?%;border-style:solid;border-color:#e5e5e5;border-top-left-radius:3px;border-bottom-left-radius:3px;border-right-width:0}.uni-numbox__plus[data-v-395a2786]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:35px;height:35px;border-width:%?1?%;border-style:solid;border-color:#e5e5e5;border-top-right-radius:3px;border-bottom-right-radius:3px;background-color:#f8f8f8;border-left-width:0}.uni-numbox--text[data-v-395a2786]{font-size:20px;color:#333}.uni-numbox--disabled[data-v-395a2786]{color:silver;cursor:not-allowed}',""]),t.exports=e},6475:function(t,e,i){"use strict";var n=i("09b4"),a=i.n(n);a.a},"6c2b":function(t,e,i){var n=i("4f37");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("4488a294",n,!0,{sourceMap:!1,shadowMode:!1})},"716c":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uniNumberBox:i("ec3a").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticStyle:{"margin-bottom":"10px"}},[i("v-uni-view",{},[t._v("患者："+t._s(t.patient.name)+" 性别："+t._s(1===t.patient.gender?"男":"女")+" 年龄："+t._s(t.patient.age))])],1),i("v-uni-view",{staticClass:"textarea-container"},[i("v-uni-view",{staticClass:"uni-title uni-common-pl"},[t._v("诊断：")]),i("v-uni-view",{staticClass:"uni-textarea"},[i("v-uni-textarea",{staticStyle:{"background-color":"#F4f4f4"},attrs:{"auto-height":!0}})],1)],1),t.medicineSelect?i("v-uni-view",{staticClass:"goods-list"},t._l(t.goodsList,(function(e,n){return i("v-uni-view",{key:n,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleItemClick(n)}}},[i("v-uni-view",{staticClass:"goods-item"},[i("v-uni-view",{staticClass:"goods-item-left"},[i("v-uni-image",{staticClass:"goods-pic",attrs:{src:e.medicine_imgs[0].url}})],1),i("v-uni-view",{staticClass:"goods-item-right"},[i("v-uni-view",{staticClass:"goods-name"},[t._v(t._s(e.medicine_name))]),i("v-uni-view",{staticClass:"goods-info-box"},[i("v-uni-view",{staticClass:"goods-price"},[t._v("￥"+t._s(t._f("tofixed")(e.price)))]),i("v-uni-button",{attrs:{type:"warn",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleItemClick(n)}}},[t._v("选择")])],1)],1)],1)],1)})),1):i("v-uni-view",{staticClass:"medicine-selected"},[i("v-uni-view",{staticClass:"medicine"},[i("v-uni-view",{staticClass:"goods-item"},[i("v-uni-view",{staticClass:"goods-item-left"},[i("v-uni-image",{staticClass:"goods-pic",attrs:{src:t.medicine.medicine_imgs[0].url}})],1),i("v-uni-view",{staticClass:"goods-item-right"},[i("v-uni-view",{staticClass:"goods-name"},[t._v(t._s(t.medicine.medicine_name))]),i("v-uni-view",{staticClass:"goods-info",staticStyle:{color:"#999999"}},[t._v(t._s(t.medicine.specification_packaging))]),i("v-uni-view",{staticClass:"goods-info"},[t._v("有效期至："+t._s(t.valid_until_format))]),i("v-uni-view",{staticClass:"goods-info-box"},[i("v-uni-view",{staticClass:"goods-price"},[t._v("￥"+t._s(t._f("tofixed")(t.medicine.price)))])],1)],1)],1),i("v-uni-view",{staticClass:"medicine-num medicine-other-info"},[i("v-uni-view",[t._v("药品数量：")]),i("uni-number-box",{attrs:{min:1,input:!1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.medicineNum.apply(void 0,arguments)}}}),i("v-uni-view",{staticStyle:{"margin-left":"10px"}},[t._v("盒")])],1),i("v-uni-view",{staticClass:"medicine-other-info"},[t._v("用法用量："+t._s(t.medicine.usage_dosage))]),i("v-uni-view",{staticClass:"medicine-other-info"},[t._v("疗程："+t._s(t.medicine.treatment_course))])],1),i("v-uni-view",{staticClass:"uni-form-item uni-column"},[i("v-uni-view",{staticClass:"title"},[t._v("医生签名")]),i("v-uni-input",{staticClass:"uni-input"})],1),i("v-uni-view",{staticClass:"punch-time",staticStyle:{"margin-top":"20px"}},[t._v("处方时间："+t._s(t._f("FormatTime")(t.clock)))]),i("v-uni-button",{staticClass:"confirm-btn",attrs:{type:"warn"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.prescribe.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)},s=[]},7947:function(t,e,i){"use strict";i.r(e);var n=i("893b"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"893b":function(t,e,i){"use strict";i("a9e3"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"UniNumberBox",emits:["change","input","update:modelValue","blur","focus"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:0}},watch:{value:function(t){this.inputValue=+t},modelValue:function(t){this.inputValue=+t}},created:function(){1===this.value&&(this.inputValue=+this.modelValue),1===this.modelValue&&(this.inputValue=+this.value)},methods:{_calcValue:function(t){if(!this.disabled){var e=this._getDecimalScale(),i=this.inputValue*e,n=this.step*e;if("minus"===t){if(i-=n,i<this.min*e)return;i>this.max*e&&(i=this.max*e)}if("plus"===t){if(i+=n,i>this.max*e)return;i<this.min*e&&(i=this.min*e)}this.inputValue=(i/e).toFixed(String(e).length-1),this.$emit("change",+this.inputValue),this.$emit("input",+this.inputValue),this.$emit("update:modelValue",+this.inputValue)}},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,String(this.step).split(".")[1].length)),t},_onBlur:function(t){this.$emit("blur",t);var e=t.detail.value;if(e){e=+e,e>this.max?e=this.max:e<this.min&&(e=this.min);var i=this._getDecimalScale();this.inputValue=e.toFixed(String(i).length-1),this.$emit("change",+this.inputValue),this.$emit("input",+this.inputValue)}},_onFocus:function(t){this.$emit("focus",t)}}};e.default=n},b766:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-numbox"},[i("v-uni-view",{staticClass:"uni-numbox__minus uni-cursor-point",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._calcValue("minus")}}},[i("v-uni-text",{staticClass:"uni-numbox--text",class:{"uni-numbox--disabled":t.inputValue<=t.min||t.disabled}},[t._v("-")])],1),i("v-uni-input",{staticClass:"uni-numbox__value",attrs:{disabled:t.disabled,type:"number"},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),t._onFocus.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t._onBlur.apply(void 0,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),i("v-uni-view",{staticClass:"uni-numbox__plus uni-cursor-point",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._calcValue("plus")}}},[i("v-uni-text",{staticClass:"uni-numbox--text",class:{"uni-numbox--disabled":t.inputValue>=t.max||t.disabled}},[t._v("+")])],1)],1)},s=[]},babc:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */.container[data-v-feb200de]{padding:10px}.textarea-container[data-v-feb200de]{display:flex;padding:10px 0;border-bottom:1px solid #f0f0f0}.textarea-container .uni-title[data-v-feb200de]{width:60px}.textarea-container uni-textarea[data-v-feb200de]{width:%?550?%;height:50px!important;padding:10px}.medicine[data-v-feb200de]{padding:10px 0;border-bottom:1px solid #f0f0f0}.medicine .medicine-num[data-v-feb200de]{display:flex;align-items:center}.medicine .medicine-other-info[data-v-feb200de]{margin-bottom:10px}.uni-form-item[data-v-feb200de]{display:flex;margin-top:20px}.uni-form-item .uni-input[data-v-feb200de]{margin-left:20px;background-color:#f4f4f4}.confirm-btn[data-v-feb200de]{position:fixed;bottom:5px;left:10px;right:10px}.goods-item[data-v-feb200de]{display:flex;padding:10px 0}.goods-item .goods-item-left[data-v-feb200de]{margin-right:15px}.goods-item .goods-item-left .goods-pic[data-v-feb200de]{width:100px;height:100px;display:block}.goods-item .goods-item-right[data-v-feb200de]{margin-right:10px;width:100%;display:flex;flex-direction:column;justify-content:space-between}.goods-item .goods-item-right .goods-name[data-v-feb200de]{font-size:16px}.goods-item .goods-item-right .goods-info[data-v-feb200de]{font-size:13px}.goods-item .goods-item-right .goods-info-box[data-v-feb200de]{width:100%;display:flex;justify-content:space-between}.goods-item .goods-item-right .goods-info-box uni-button[data-v-feb200de]{margin:0}.goods-item .goods-item-right .goods-price[data-v-feb200de]{font-size:16px;color:#c00000}.goods-item .goods-item-right .icon-tianxie[data-v-feb200de]{font-size:25px;color:#c00000}',""]),t.exports=e},bd04:function(t,e,i){"use strict";i.r(e);var n=i("716c"),a=i("fc52");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("6475");var o,r=i("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"feb200de",null,!1,n["a"],o);e["default"]=u.exports},ec3a:function(t,e,i){"use strict";i.r(e);var n=i("b766"),a=i("7947");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("20b9");var o,r=i("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"395a2786",null,!1,n["a"],o);e["default"]=u.exports},fc52:function(t,e,i){"use strict";i.r(e);var n=i("fd1e"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},fd1e:function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("fb6a"),i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var a=n(i("1da1")),s=n(i("c282")),o={data:function(){return{medicine_num:1,clock:Date.parse(new Date),medicineSelect:!0,medicine:null,patient:null,goodsList:[],total:0}},computed:{valid_until_format:function(){return(0,s.default)(this.medicine).format("YYYY/MM/DD")}},filters:{FormatTime:function(t){var e=new Date(t),i=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),a=("0"+e.getDate()).slice(-2),s=("0"+e.getHours()).slice(-2),o=("0"+e.getMinutes()).slice(-2),r=("0"+e.getSeconds()).slice(-2),u="";return u=i+"-"+n+"-"+a+" "+s+":"+o+":"+r,u},tofixed:function(t){return Number(t).toFixed(2)}},onLoad:function(t){var e=this;setInterval((function(){e.clock=Date.parse(new Date)}),1e3),this.gePatient(t.id),this.getGoodsList()},methods:{medicineNum:function(t){this.medicine_num=t},prescribe:function(){var t=this.medicine._id,e="杨少杰",i=this.patient.name,n="感冒",a=this.medicine_num;this.addPrescription({medicine:t,doctor_name:e,patient_name:i,diagnosis:n,medicine_num:a})},addPrescription:function(e){return(0,a.default)(regeneratorRuntime.mark((function i(){var n,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.database().collection("prescription"),i.next=3,n.add(e);case 3:if(a=i.sent,a=a.result,0===a.code){i.next=7;break}return i.abrupt("return",uni.$showMsg());case 7:console.log(a);case 8:case"end":return i.stop()}}),i)})))()},gePatient:function(e){var i=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.database().collection("patient"),n.next=3,a.where({_id:e}).get();case 3:if(s=n.sent,s=s.result,0===s.code){n.next=7;break}return n.abrupt("return",uni.$showMsg());case 7:i.patient=s.data[0];case 8:case"end":return n.stop()}}),n)})))()},getGoodsList:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function i(){var n,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.database().collection("medicine"),i.next=3,n.get();case 3:if(a=i.sent,a=a.result,0===a.code){i.next=7;break}return i.abrupt("return",uni.$showMsg());case 7:e.goodsList=a.data;case 8:case"end":return i.stop()}}),i)})))()},handleItemClick:function(t){this.medicineSelect=!1,this.medicine=this.goodsList[t]}}};e.default=o}).call(this,i("a9ff")["default"])}}]);