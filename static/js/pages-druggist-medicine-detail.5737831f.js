(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-druggist-medicine-detail"],{1720:function(e,t,n){"use strict";(function(e){var i=n("4ea4");n("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var o=i(n("1da1")),a=i(n("ade3")),r=i(n("5530")),d=n("fa35"),s=i(n("c282")),u={data:function(){var e;return e={queryWhere:"",loadMore:{contentdown:"",contentrefresh:"",contentnomore:""},options:(0,r.default)({},d.enumConverter),goods_info:{}},(0,a.default)(e,"options",[{icon:"shop",text:"店铺"},{icon:"cart",text:"购物车",info:2}]),(0,a.default)(e,"buttonGroup",[{text:"加入购物车",backgroundColor:"#ff0000",color:"#fff"},{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}]),e},onLoad:function(e){this._id=e.id;var t=e.id;this.getGoodsDetail(t)},onReady:function(){this._id&&(this.queryWhere='_id=="'+this._id+'"')},methods:{preview:function(e){uni.previewImage({current:e,urls:this.goods_info.medicine_imgs.map((function(e){return e.url}))})},previewSpecification:function(){uni.previewImage({urls:this.goods_info.specification_img.map((function(e){return e.url}))})},getGoodsDetail:function(t){var n=this;return(0,o.default)(regeneratorRuntime.mark((function i(){var o,a,r,d;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=e.database().collection("medicine"),i.next=3,o.where({_id:t}).get();case 3:if(a=i.sent,a=a.result,0===a.code){i.next=7;break}return i.abrupt("return",uni.$showMsg());case 7:n.goods_info=a.data[0],r=n.goods_info.production_date,n.goods_info.production_date=(0,s.default)(r).format("YYYY/MM/DD"),d=n.goods_info.valid_until,n.goods_info.valid_until=(0,s.default)(d).format("YYYY/MM/DD");case 12:case"end":return i.stop()}}),i)})))()},handleUpdate:function(){var e=this;uni.navigateTo({url:"./edit?id="+this._id,events:{refreshData:function(){e.$refs.udb.loadData({clear:!0})}}})},handleDelete:function(){this.$refs.udb.remove(this._id,{success:function(e){uni.navigateTo({url:"./list"})}})}}};t.default=u}).call(this,n("a9ff")["default"])},"1e79":function(e,t,n){"use strict";n.r(t);var i=n("1720"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"27fa":function(e,t,n){var i=n("9223");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("3349bf36",i,!0,{sourceMap:!1,shadowMode:!1})},"3ff4":function(e,t,n){"use strict";var i=n("27fa"),o=n.n(i);o.a},9223:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */.container[data-v-4075b8d9]{padding:10px}uni-swiper[data-v-4075b8d9]{height:%?750?%}uni-swiper uni-image[data-v-4075b8d9]{width:100%;height:100%}.goods-info-box[data-v-4075b8d9]{padding:10px;padding-right:0;margin-bottom:25px}.goods-info-box .price[data-v-4075b8d9]{color:#c00000;font-size:18px;margin:10px 0}.goods-info-box .goods-info-body[data-v-4075b8d9]{display:flex;justify-content:space-between}.goods-info-box .goods-info-body .goods-name[data-v-4075b8d9]{font-size:13px;padding-right:10px}.goods-info-box .goods-info-body .favi[data-v-4075b8d9]{width:120px;font-size:12px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-left:1px solid #efefef;color:grey}.goods-info-box .yf[data-v-4075b8d9]{margin:10px 0;font-size:12px;color:grey}.goods-detail-container[data-v-4075b8d9]{padding-bottom:60px}.btns[data-v-4075b8d9]{width:%?730?%;position:fixed;bottom:5px;left:10px;right:10px;display:flex;flex-direction:row;justify-content:flex-end}.btns uni-button[data-v-4075b8d9]{flex:1}.btn-delete[data-v-4075b8d9]{margin-left:10px;margin-right:10px}',""]),e.exports=t},"931d":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uniTable:n("ff82").default,uniTr:n("274c").default,uniTd:n("42e5").default},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"goods-detail-container"},[n("v-uni-swiper",{attrs:{"indicator-dots":!0,autoplay:!0,interval:6e3,duration:1e3,circular:!0}},e._l(e.goods_info.medicine_imgs,(function(t,i){return n("v-uni-swiper-item",{key:i},[n("v-uni-image",{attrs:{src:t.url},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.preview(i)}}})],1)})),1),n("v-uni-view",{staticClass:"goods-info-box"},[e.goods_info.price?n("v-uni-view",{staticClass:"price"},[e._v("￥"+e._s(e.goods_info.price))]):e._e(),n("v-uni-view",{staticClass:"goods-info-body"},[n("v-uni-view",{staticClass:"goods-name"},[e._v(e._s(e.goods_info.medicine_name))])],1)],1),n("uni-table",{attrs:{border:!0,stripe:!0,emptyText:"暂无更多数据"}},[n("uni-tr",[n("uni-td",[e._v("通用名")]),n("uni-td",[e._v(e._s(e.goods_info.generic_name))])],1),n("uni-tr",[n("uni-td",[e._v("药品名称")]),n("uni-td",[e._v(e._s(e.goods_info.medicine_name))])],1),n("uni-tr",[n("uni-td",[e._v("药品类型")]),n("uni-td",[e._v(e._s(e.goods_info.medicine_type))])],1),n("uni-tr",[n("uni-td",[e._v("规格包装")]),n("uni-td",[e._v(e._s(e.goods_info.specification_packaging))])],1),n("uni-tr",[n("uni-td",[e._v("剂型")]),n("uni-td",[e._v(e._s(e.goods_info.medicine_form))])],1),n("uni-tr",[n("uni-td",[e._v("用法用量")]),n("uni-td",[e._v(e._s(e.goods_info.usage_dosage))])],1),n("uni-tr",[n("uni-td",[e._v("疗程")]),n("uni-td",[e._v(e._s(e.goods_info.treatment_course))])],1),n("uni-tr",[n("uni-td",[e._v("厂家")]),n("uni-td",[e._v(e._s(e.goods_info.manufacturer))])],1),n("uni-tr",[n("uni-td",[e._v("批准文号")]),n("uni-td",[e._v(e._s(e.goods_info.approval_number))])],1),n("uni-tr",[n("uni-td",[e._v("生产日期")]),n("uni-td",[e._v(e._s(e.goods_info.production_date))])],1),n("uni-tr",[n("uni-td",[e._v("有效期至")]),n("uni-td",[e._v(e._s(e.goods_info.valid_until))])],1)],1),n("v-uni-image",{staticStyle:{width:"750rpx",height:"1200rpx"},attrs:{mode:"scaleToFill",src:e.goods_info.specification_img[0].url},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewSpecification()}}})],1),n("v-uni-view",{staticClass:"btns"},[n("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleUpdate.apply(void 0,arguments)}}},[e._v("修改")]),n("v-uni-button",{staticClass:"btn-delete",attrs:{type:"warn"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleDelete.apply(void 0,arguments)}}},[e._v("删除")])],1)],1)},a=[]},a5e9:function(e,t,n){"use strict";n.r(t);var i=n("931d"),o=n("1e79");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("3ff4");var r,d=n("f0c5"),s=Object(d["a"])(o["default"],i["b"],i["c"],!1,null,"4075b8d9",null,!1,i["a"],r);t["default"]=s.exports},fa35:function(e,t,n){"use strict";var i=n("4ea4");n("4d63"),n("ac1f"),n("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.filterToWhere=s,t.enumConverter=t.validator=void 0;var o=i(n("3835")),a=i(n("b85c")),r={medicine_imgs:{rules:[{format:"array"}],label:"药品外包装图片"},specification_img:{rules:[{format:"array"}],label:"药品说明书图片"},generic_name:{rules:[{required:!0},{format:"string"}],label:"通用名"},medicine_name:{rules:[{required:!0},{format:"string"}],label:"药品名称"},medicine_type:{rules:[{format:"string"}],label:"药品类型"},specification_packaging:{rules:[{format:"string"}],label:"规格包装"},price:{rules:[{format:"int"}],label:"单价"},medicine_form:{rules:[{format:"string"}],label:"剂型"},usage_dosage:{rules:[{format:"string"}],label:"用法用量"},treatment_course:{rules:[{format:"string"}],label:"疗程"},manufacturer:{rules:[{format:"string"}],label:"厂家"},approval_number:{rules:[{format:"string"}],label:"批准文号"},production_date:{rules:[{format:"timestamp"}],label:"生产日期"},valid_until:{rules:[{format:"timestamp"}],label:"有效期至"},is_on_sale:{rules:[{format:"bool"}],defaultValue:!0,label:"是否上架"}};t.validator=r;var d={};function s(e,t){var n={};for(var i in e){var r=e[i],d=r.type,s=r.value;switch(d){case"search":"string"===typeof s&&s.length&&(n[i]=new RegExp(s));break;case"select":if(s.length){var u,f=[],l=(0,a.default)(s);try{for(l.s();!(u=l.n()).done;){var c=u.value;f.push(t.eq(c))}}catch(k){l.e(k)}finally{l.f()}n[i]=t.or(f)}break;case"range":if(s.length){var v=s[0],p=s[1];n[i]=t.and([t.gte(v),t.lte(p)])}break;case"date":if(s.length){var g=(0,o.default)(s,2),_=g[0],m=g[1],b=new Date(_),h=new Date(m);n[i]=t.and([t.gte(b),t.lte(h)])}break;case"timestamp":if(s.length){var x=(0,o.default)(s,2),w=x[0],y=x[1];n[i]=t.and([t.gte(w),t.lte(y)])}break}}return n}t.enumConverter=d}}]);